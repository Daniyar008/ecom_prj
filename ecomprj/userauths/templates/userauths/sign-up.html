{% extends 'partials/base.html' %}
{% load static %}
{% load i18n %}
{% block content %}

<style>
    /* Registration page background - milky grey */
    .page-content.registration-page {
        background-color: #f5f5f5 !important;
    }
    /* Registration form component - white milky */
    .login_wrap.registration-form {
        background-color: #fefefe !important;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    /* Password strength indicator */
    .password-strength-container {
        margin-top: 5px;
    }
    .password-strength-bar {
        height: 5px;
        border-radius: 3px;
        background-color: #e0e0e0;
        overflow: hidden;
    }
    .password-strength-fill {
        height: 100%;
        width: 0%;
        transition: width 0.3s, background-color 0.3s;
    }
    .password-strength-text {
        font-size: 12px;
        margin-top: 3px;
    }
    .strength-weak { background-color: #ff4444; }
    .strength-fair { background-color: #ffbb33; }
    .strength-good { background-color: #00C851; }
    .strength-strong { background-color: #007E33; }
</style>

    <main class="main pages">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="{% url 'core:index' %}" rel="nofollow"><i class="fi-rs-home mr-5"></i>{% trans "Home" %}</a>
                    <span></span> {% trans "Pages" %} <span></span> {% trans "My Account" %}
                </div>
            </div>
        </div>
        <div class="page-content pt-150 pb-150 registration-page">
            <div class="container">
                <div class="row">
                    <div class="col-xl-8 col-lg-10 col-md-12 m-auto">
                        <div class="row">
                            <div class="col-lg-6 col-md-8">
                                <div class="login_wrap widget-taber-content background-white registration-form">
                                    <div class="padding_eight_all bg-white">

                                        {% if messages %}
                                        <div class="alert alert-danger">
                                            <ul class="mb-0">
                                                {% for message in messages %}
                                                <li>{{ message }}</li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                        {% endif %}


                                        <div class="heading_s1">
                                            <h1 class="mb-5">{% trans "Create an Account" %}</h1>
                                            <p class="mb-30">{% trans "Already have an account?" %} <a href="{% url 'userauths:sign-in' %}">{% trans "Login" %}</a></p>
                                        </div>
                                        <form method="post" method="POST">
                                            {% csrf_token %}
                                            <div class="form-group">
                                                {{form.username}}
                                            </div>
                                            <div class="form-group">
                                                {{form.email}}
                                            </div>
                                            <div class="form-group">
                                                {{form.password1}}
                                                <div class="password-strength-container">
                                                    <div class="password-strength-bar">
                                                        <div class="password-strength-fill" id="strengthBar"></div>
                                                    </div>
                                                    <div class="password-strength-text" id="strengthText"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{form.password2}}
                                            </div>

                                            <div class="form-group mb-30">
                                                <button type="submit" class="btn btn-fill-out btn-block hover-up font-weight-bold" name="login">{% trans "Submit & Register" %}</button>
                                            </div>
                                            <p class="font-xs text-muted"><strong>{% trans "Note:" %}</strong>{% trans "Your personal data will be used to support your experience throughout this website, to manage access to your account, and for other purposes described in our privacy policy" %}</p>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 pr-30 d-none d-lg-block">
                                <div class="card-login mt-115">
                                    <a href="#" class="social-login facebook-login">
                                        <img src="{% static 'assets/imgs/theme/icons/logo-facebook.svg' %}" alt="" />
                                        <span>{% trans "Continue with Facebook" %}</span>
                                    </a>
                                    <a href="#" class="social-login google-login">
                                        <img src="{% static 'assets/imgs/theme/icons/logo-google.svg' %}" alt="" />
                                        <span>{% trans "Continue with Google" %}</span>
                                    </a>
                                    <a href="#" class="social-login apple-login">
                                        <img src="{% static 'assets/imgs/theme/icons/logo-apple.svg' %}" alt="" />
                                        <span>{% trans "Continue with Apple" %}</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

<script>
// Password strength checker
document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.querySelector('input[name="password1"]');
    const strengthBar = document.getElementById('strengthBar');
    const strengthText = document.getElementById('strengthText');
    
    if (passwordInput) {
        passwordInput.addEventListener('input', function() {
            const password = this.value;
            const strength = checkPasswordStrength(password);
            
            strengthBar.style.width = strength.percent + '%';
            strengthBar.className = 'password-strength-fill ' + strength.class;
            strengthText.textContent = strength.text;
            strengthText.style.color = strength.color;
        });
    }
    
    function checkPasswordStrength(password) {
        let score = 0;
        
        if (password.length === 0) {
            return { percent: 0, class: '', text: '', color: '#666' };
        }
        
        // Length
        if (password.length >= 8) score += 1;
        if (password.length >= 12) score += 1;
        
        // Contains lowercase
        if (/[a-z]/.test(password)) score += 1;
        
        // Contains uppercase
        if (/[A-Z]/.test(password)) score += 1;
        
        // Contains numbers
        if (/\d/.test(password)) score += 1;
        
        // Contains special characters
        if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) score += 1;
        
        if (score <= 2) {
            return { percent: 25, class: 'strength-weak', text: '{% trans "Weak" %}', color: '#ff4444' };
        } else if (score <= 3) {
            return { percent: 50, class: 'strength-fair', text: '{% trans "Fair" %}', color: '#ffbb33' };
        } else if (score <= 5) {
            return { percent: 75, class: 'strength-good', text: '{% trans "Good" %}', color: '#00C851' };
        } else {
            return { percent: 100, class: 'strength-strong', text: '{% trans "Strong" %}', color: '#007E33' };
        }
    }
});
</script>

{% endblock content %}
